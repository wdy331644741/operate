## 网利宝重构用户中心---账号安全相关接口

接口调用方式：`RPC`

## 接口列表

- [是否设置交易密码](#是否设置交易密码)
- [设置交易密码](#设置交易密码)
- [记得原交易密码](#记得原交易密码)
- [忘记交易密码](#忘记交易密码)
- [修改交易密码](#修改交易密码)
- [修改绑定手机](#修改绑定手机)
- [（修改绑定手机）短信验证码](#修改绑定手机短信验证码)
- [交易密码验证](#交易密码验证用于支付或充值)
- [账户解冻](#账户解冻)
- [登录密码验证](#登录密码验证用于设置交易密码或手势密码)


账号安全相关接口
----------------

接口地址
> 域名/service.php?c=account

请求方式
> post

参数类型 (`Content-Type`)
>  application/json

登录状态
> 请求需要登录状态，cookie  SESSIONID=session_id


## 是否设置交易密码

说明：检查是否设置交易密码

##### 请求参数

	{
    	"jsonrpc": "2.0",
    	"method": "isSetTradePwd",
    	"params": [],
    	"id": 1
    }

##### 返回结果

	成功：
        {
          "jsonrpc": "2.0",
          "result": {
            "code": 0,
            "message": "success",
            "isset": 1(是) | 0 (否)
          },
          "id": 1
        }

	失败：
		{
          "jsonrpc": "2.0",
          "error": {
            "code": 1106,
            "message": "用户未登录"
          },
          "id": 1
        }

##### 所有错误情况说明

错误信息 | 错误码 | 错误说明
:--|:--|:--
用户未登录 | 1106 | 用户未登录


## 设置交易密码

说明：设置交易密码

##### 请求参数

	{
    	"jsonrpc": "2.0",
    	"method": "tradePwdSet",
    	"params": [
    	    {
    	        "trade_pwd": 123123
    	    }
    	],
    	"id": 1
    }

##### 返回结果

	成功：
        {
		  "jsonrpc": "2.0",
		  "result": {
		    "code": 0,
		    "message": "设置成功"
		  },
		  "id": 1
		}

	失败：
		{
		  "jsonrpc": "2.0",
		  "error": {
		    "code": 1305,
		    "message": "已设置交易密码"
		  },
		  "id": 1
		}

##### 所有错误情况说明

错误信息 | 错误码 | 错误说明
:--|:--|:--
用户未登录 | 1106 | 用户未登录
密码格式错误 | 1102 | 六位纯数字组成
已设置交易密码 | 1305 | 已设置交易密码
交易密码设置失败 | 1402 | mysql服务器写入失败


## 记得原交易密码

说明：该方式通过验证旧密码，来修改新密码。适用于记得旧的交易密码的用户

##### 请求参数

	{
	    "jsonrpc": "2.0",
	    "method": "modifyTradePwdModeA",
	    "params": [
	        {
	            "old_trade_pwd": "123123",
	            "new_trade_pwd": "123123"
	        }
	    ],
	    "id": 1
	}

参数名 | 是否必须 | 类型 | 备注
:--|:--|:--|:--
old_trade_pwd | 是 | string | 用户原始交易密码
new_trade_pwd | 是 | string | 新交易密码
repeat_trade_pwd | 是 | string | 重复新交易密码

##### 返回结果

	成功：
        {
		  "jsonrpc": "2.0",
		  "result": {
		    "code": 0,
		    "message": "修改交易密码成功"
		  },
		  "id": 1
		}

	失败：
		{
		  "jsonrpc": "2.0",
		  "error": {
		    "code": 1102,
		    "message": "密码格式错误"
		  },
		  "id": 1
		}

##### 所有错误情况说明

错误信息 | 错误码 | 错误说明
:--|:--|:--
用户未登录 | 1106 | 用户未登录
密码格式错误 | 1102 | 6位纯数字组成
原始密码输入错误 | 1204 | 原始交易密码错误
未设置交易密码 | 1300 | 还未设置交易密码
交易密码设置失败，请重试 | 1402 | mysql服务器写入失败


## 忘记交易密码

说明：用户忘记交易密码的情况下，通过验证身份身份信息（身份证号和银行卡信息），来修改交易密码。
改接口是第一步，验证身份信息，获取修改交易密码的权限

##### 请求参数

	{
        "jsonrpc": "2.0",
        "method": "modifyTradePwdModeB",
        "params": [
            {
                "idcardno": "130429199104216215",
                "cardno": "6214830121363633"
            }
        ],
        "id": 1
    }

参数名 | 是否必须 | 类型 | 备注
:--|:--|:--|:--
idcardno | 是 | string | 用户身份证号
cardno | 是 | string | 用户绑定银行卡号

##### 返回结果

	成功：
        {
		  "jsonrpc": "2.0",
		  "result": {
		    "code": 0,
		    "message": "success",
		    "data": {
              "handle": "handle_checked_identify",
              "token": "T7jM5hHFLnqeM5ox"
            }
		  },
		  "id": 1
		}

	失败：
		{
		  "jsonrpc": "2.0",
		  "error": {
		    "code": 1102,
		    "message": "密码格式错误"
		  },
		  "id": 1
		}

##### 所有错误情况说明

错误信息 | 错误码 | 错误说明
:--|:--|:--
缺少必要参数 | 1000 | 接口调用参数不符
用户未登录 | 1106 | 用户未登录
密码格式错误 | 1102 | 6位纯数字组成
身份认证失败 | 1210 | 用户输入的身份证号和实名认证的不一致
银行卡信息错误 | 1212 | 用户未绑卡，或提供的银行卡信息错误
未设置交易密码 | 1300 | 还未设置交易密码
用户未实名认证 | 1301 | 用户未实名认证
交易密码设置失败，请重试 | 1402 | mysql服务器写入失败


## 修改交易密码

说明：通过关联的上一步操作拿到改接口的使用权限（handle和token），来修改交易密码

##### 请求参数

	{
        "jsonrpc": "2.0",
        "method": "updateTradePwd",
        "params": [
            {
                "trade_pwd": "123123",
                "handle": "handle_checked_identify",
                "token": "T7jM5hHFLnqeM5ox"
            }
        ],
        "id": 1
    }

参数名 | 是否必须 | 类型 | 备注
:--|:--|:--|:--
trade_pwd | 是 | string | 用户新交易密码
handle | 是 | string | 上一步操作标识
token | 是 | string | 操作该接口权限

##### 返回结果

	成功：
        {
		  "jsonrpc": "2.0",
		  "result": {
		    "code": 0,
		    "message": "修改交易密码成功"
		  },
		  "id": 1
		}

	失败：
		{
		  "jsonrpc": "2.0",
		  "error": {
		    "code": 1102,
		    "message": "密码格式错误"
		  },
		  "id": 1
		}

##### 所有错误情况说明

错误信息 | 错误码 | 错误说明
:--|:--|:--
缺少必要参数 | 1000 | 接口调用参数不符
非法请求 | 1001 | token验证失败
用户未登录 | 1106 | 用户未登录
密码格式错误 | 1102 | 6位纯数字组成
未设置交易密码 | 1300 | 还未设置交易密码
交易密码设置失败，请重试 | 1402 | mysql服务器写入失败




## 交易密码验证（用于支付或充值）

说明：用户发生购买行为时，交易密码验证（需要登录状态）


##### 请求参数

	{
        "jsonrpc": "2.0",
        "method": "checkTradePwd",
        "params": [
            {
                "trade_pwd": "123123"
            }
        ],
        "id": 1
    }

参数名 | 类型 | 是否必填 | 备注
:--|:--|:--|:--
trade_pwd | string | 是 | 用户交易密码


##### 返回结果

	成功：
		{
          "jsonrpc": "2.0",
          "result": {
            "code": 0,
            "message": "success"
          },
          "id": 1
        }

	失败：
		{
          "jsonrpc": "2.0",
          "error": {
            "code": 1500,
            "message": "交易密码已被锁定,请3小时后再试"
          },
          "id": 1
        }

##### 所有错误情况说明

错误信息 | 错误码 | 错误说明
:--|:--|:--
接口调用过于频繁 | 1002 | 接口调用过于频繁
密码格式错误 | 1102 | 交易密码6位纯数字
用户未登录 | 1106 | 用户未登录
手机号码格式错误 | 1103 | 用户填写的手机号码格式不正确
交易密码错误,您还可以输入xx次 | 1203 | 密码输入错误
未设置交易密码 | 1300 | 未设置交易密码
交易密码已被锁定,请3小时后再试 | 1500 | 失败次数太多，账号交易功能冻结


## 账户解冻

说明：解冻交易密码失败次数过多导致的账号冻结，主要用于接口对接测试方便（不排除后台调用，所以保留改接口）


##### 请求参数

	{
        "jsonrpc": "2.0",
        "method": "refrozeTradePwd",
        "params": [],
        "id": 1
    }

##### 返回结果

	成功：
		{
          "jsonrpc": "2.0",
          "result": {
            "code": 0,
            "message": "success"
          },
          "id": 1
        }

	失败：
		{
          "jsonrpc": "2.0",
          "error": {
            "code": 1106,
            "message": "用户未登录"
          },
          "id": 1
        }

##### 所有错误情况说明

错误信息 | 错误码 | 错误说明
:--|:--|:--
用户未登录 | 1106 | 用户未登录


## 登录密码验证（用于设置交易密码或手势密码）

说明：用户初次设置交易密码或手势密码时，密码验证（需要登录状态）


##### 请求参数

	{
        "jsonrpc": "2.0",
        "method": "checkSigninPwd",
        "params": [
            {
                "password": "123123"
            }
        ],
        "id": 1
    }

##### 返回结果

	成功：
		{
          "jsonrpc": "2.0",
          "result": {
            "code": 0,
            "message": "success"
          },
          "id": 1
        }

	失败：
		{
          "jsonrpc": "2.0",
          "error": {
            "code": 1106,
            "message": "用户未登录"
          },
          "id": 1
        }

##### 所有错误情况说明

错误信息 | 错误码 | 错误说明
:--|:--|:--
用户未登录 | 1106 | 用户未登录
接口调用过于频繁 | 1002 | 接口调用过于频繁
验证失败,你还可以重试xx次 | 1203 | 登录密码不正确
错误次数频繁，请3小时后重试 | 1501 | 登录密码验证冻结

